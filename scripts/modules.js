let modulesKids = [
  {
    heading: "Модуль 1: Введение в веб-технологии и основы HTML",
    data: [
      {
        title: "Введение в веб-разработку",
        elements: [
          "Роль фронтенд-разработки в создании веб-приложений",
          "Обзор современных технологий",
        ],
      },
      {
        title: "Основы HTML",
        elements: [
          "Структура HTML-документа",
          "Работа с тегами и атрибутами",
          "Формы и их элементы",
        ],
      },
      {
        title: "Семантическая разметка",
        elements: [
          "Значение семантических тегов",
          "Создание доступных и поисковых оптимизированных страниц",
        ],
      },
    ],
  },
  {
    heading: "Модуль 2: Основы CSS и стилизация веб-страниц",
    data: [
      {
        title: "Введение в веб-разработку",
        elements: [
          "Роль фронтенд-разработки в создании веб-приложений",
          "Обзор современных технологий",
        ],
      },
      {
        title: "Основы HTML",
        elements: [
          "Структура HTML-документа",
          "Работа с тегами и атрибутами",
          "Формы и их элементы",
        ],
      },
      {
        title: "Семантическая разметка",
        elements: [
          "Значение семантических тегов",
          "Создание доступных и поисковых оптимизированных страниц",
        ],
      },
    ],
  },
  {
    heading: "Модуль 3: Основы JavaScript и взаимодействие с DOM",
    data: [
      {
        title: "Введение в веб-разработку",
        elements: [
          "Роль фронтенд-разработки в создании веб-приложений",
          "Обзор современных технологий",
        ],
      },
      {
        title: "Основы HTML",
        elements: [
          "Структура HTML-документа",
          "Работа с тегами и атрибутами",
          "Формы и их элементы",
        ],
      },
      {
        title: "Семантическая разметка",
        elements: [
          "Значение семантических тегов",
          "Создание доступных и поисковых оптимизированных страниц",
        ],
      },
    ],
  },
  {
    heading: "Модуль 4: Фреймворки и библиотеки",
    data: [
      {
        title: "Введение в веб-разработку",
        elements: [
          "Роль фронтенд-разработки в создании веб-приложений",
          "Обзор современных технологий",
        ],
      },
      {
        title: "Основы HTML",
        elements: [
          "Структура HTML-документа",
          "Работа с тегами и атрибутами",
          "Формы и их элементы",
        ],
      },
      {
        title: "Семантическая разметка",
        elements: [
          "Значение семантических тегов",
          "Создание доступных и поисковых оптимизированных страниц",
        ],
      },
    ],
  },
  {
    heading: "Модуль 5: Оптимизация производительности и отладка",
    data: [
      {
        title: "Введение в веб-разработку",
        elements: [
          "Роль фронтенд-разработки в создании веб-приложений",
          "Обзор современных технологий",
        ],
      },
      {
        title: "Основы HTML",
        elements: [
          "Структура HTML-документа",
          "Работа с тегами и атрибутами",
          "Формы и их элементы",
        ],
      },
      {
        title: "Семантическая разметка",
        elements: [
          "Значение семантических тегов",
          "Создание доступных и поисковых оптимизированных страниц",
        ],
      },
    ],
  },
  {
    heading: "Модуль 6: Введение в тестирование и сборка проектов",
    data: [
      {
        title: "Введение в веб-разработку",
        elements: [
          "Роль фронтенд-разработки в создании веб-приложений",
          "Обзор современных технологий",
        ],
      },
      {
        title: "Основы HTML",
        elements: [
          "Структура HTML-документа",
          "Работа с тегами и атрибутами",
          "Формы и их элементы",
        ],
      },
      {
        title: "Семантическая разметка",
        elements: [
          "Значение семантических тегов",
          "Создание доступных и поисковых оптимизированных страниц",
        ],
      },
    ],
  },
  {
    heading: "Модуль 7: Завершающий проект и практика",
    data: [
      {
        title: "Введение в веб-разработку",
        elements: [
          "Роль фронтенд-разработки в создании веб-приложений",
          "Обзор современных технологий",
        ],
      },
      {
        title: "Основы HTML",
        elements: [
          "Структура HTML-документа",
          "Работа с тегами и атрибутами",
          "Формы и их элементы",
        ],
      },
      {
        title: "Семантическая разметка",
        elements: [
          "Значение семантических тегов",
          "Создание доступных и поисковых оптимизированных страниц",
        ],
      },
    ],
  },
];

let modulesAdults = [
  {
    heading: "Модуль 731: Введение в веб-технологии и основы HTML",
    data: [
      {
        title: "Введение в веб-разработку",
        elements: [
          "Роль фронтенд-разработки в создании веб-приложений",
          "Обзор современных технологий",
        ],
      },
      {
        title: "Основы HTML",
        elements: [
          "Структура HTML-документа",
          "Работа с тегами и атрибутами",
          "Формы и их элементы",
        ],
      },
      {
        title: "Семантическая разметка",
        elements: [
          "Значение семантических тегов",
          "Создание доступных и поисковых оптимизированных страниц",
        ],
      },
    ],
  },
  {
    heading: "Модуль 2345: Основы CSS и стилизация веб-страниц",
    data: [
      {
        title: "Введение в веб-разработку",
        elements: [
          "Роль фронтенд-разработки в создании веб-приложений",
          "Обзор современных технологий",
        ],
      },
      {
        title: "Основы HTML",
        elements: [
          "Структура HTML-документа",
          "Работа с тегами и атрибутами",
          "Формы и их элементы",
        ],
      },
      {
        title: "Семантическая разметка",
        elements: [
          "Значение семантических тегов",
          "Создание доступных и поисковых оптимизированных страниц",
        ],
      },
    ],
  },
  {
    heading: "Модуль 3: Основы JavaScript и взаимодействие с DOM",
    data: [
      {
        title: "Введение в веб-разработку",
        elements: [
          "Роль фронтенд-разработки в создании веб-приложений",
          "Обзор современных технологий",
        ],
      },
      {
        title: "Основы HTML",
        elements: [
          "Структура HTML-документа",
          "Работа с тегами и атрибутами",
          "Формы и их элементы",
        ],
      },
      {
        title: "Семантическая разметка",
        elements: [
          "Значение семантических тегов",
          "Создание доступных и поисковых оптимизированных страниц",
        ],
      },
    ],
  },
  {
    heading: "Модуль 4: Фреймворки и библиотеки",
    data: [
      {
        title: "Введение в веб-разработку",
        elements: [
          "Роль фронтенд-разработки в создании веб-приложений",
          "Обзор современных технологий",
        ],
      },
      {
        title: "Основы HTML",
        elements: [
          "Структура HTML-документа",
          "Работа с тегами и атрибутами",
          "Формы и их элементы",
        ],
      },
      {
        title: "Семантическая разметка",
        elements: [
          "Значение семантических тегов",
          "Создание доступных и поисковых оптимизированных страниц",
        ],
      },
    ],
  },
  {
    heading: "Модуль 5: Оптимизация производительности и отладка",
    data: [
      {
        title: "Введение в веб-разработку",
        elements: [
          "Роль фронтенд-разработки в создании веб-приложений",
          "Обзор современных технологий",
        ],
      },
      {
        title: "Основы HTML",
        elements: [
          "Структура HTML-документа",
          "Работа с тегами и атрибутами",
          "Формы и их элементы",
        ],
      },
      {
        title: "Семантическая разметка",
        elements: [
          "Значение семантических тегов",
          "Создание доступных и поисковых оптимизированных страниц",
        ],
      },
    ],
  },
  {
    heading: "Модуль 6: Введение в тестирование и сборка проектов",
    data: [
      {
        title: "Введение в веб-разработку",
        elements: [
          "Роль фронтенд-разработки в создании веб-приложений",
          "Обзор современных технологий",
        ],
      },
      {
        title: "Основы HTML",
        elements: [
          "Структура HTML-документа",
          "Работа с тегами и атрибутами",
          "Формы и их элементы",
        ],
      },
      {
        title: "Семантическая разметка",
        elements: [
          "Значение семантических тегов",
          "Создание доступных и поисковых оптимизированных страниц",
        ],
      },
    ],
  },
  {
    heading: "Модуль 7: Завершающий проект и практика",
    data: [
      {
        title: "Введение в веб-разработку",
        elements: [
          "Роль фронтенд-разработки в создании веб-приложений",
          "Обзор современных технологий",
        ],
      },
      {
        title: "Основы HTML",
        elements: [
          "Структура HTML-документа",
          "Работа с тегами и атрибутами",
          "Формы и их элементы",
        ],
      },
      {
        title: "Семантическая разметка",
        elements: [
          "Значение семантических тегов",
          "Создание доступных и поисковых оптимизированных страниц",
        ],
      },
    ],
  },
];

class Portfolio extends React.Component {
  constructor(props) {
    super(props);
    this.state = {
      isKidsModule: true,
      opened: [],
    };
  }

  resetOpened(arr) {
    this.state.opened = [];
    arr.map(() => {
      this.state.opened.push(0);
    });
  }

  renderModules(arr) {
    this.resetOpened(arr);
    console.debug("changed");
    // console.log(this.state.opened);
    return arr.map(({ heading, data }, index) => {
      return (
        <div className="module">
          <div className="module-heading">
            <p className="p1 semibold">{heading}</p>
            <button
              id={`module-${index}`}
              onClick={() => {
                let btn_id = event.target.id.replace("module-", "");
                // console.log(btn_id);
                let btn = document.getElementById(event.target.id);
                const modules =
                  btn.parentElement.parentElement.parentElement.children;
                const moduleActive =
                  btn.parentElement.parentElement.children[1];

                if (this.state.opened[btn_id] == 0) {
                  for (let i = 0; i < this.state.opened.length; i++) {
                    this.state.opened[i] = 0;
                  }
                  for (let i = 0; i < modules.length; i++) {
                    modules[i].children[1].classList.remove("module-active");
                    modules[i].children[1].style.maxHeight = 0;
                    modules[i].children[0].children[1].classList.remove(
                      "module-btn-active"
                    );
                  }
                  this.state.opened[btn_id] = 1;
                  moduleActive.classList.add("module-active");
                  moduleActive.style.maxHeight = `${moduleActive.scrollHeight}px`;
                } else {
                  this.state.opened[btn_id] = 0;
                  moduleActive.classList.remove("module-active");
                  moduleActive.style.maxHeight = 0;
                }

                btn.classList.toggle("module-btn-active");
                // console.log(modules);
                console.log(this.state.opened);
              }}
            ></button>
          </div>
          <div className="module-data" id={`module-data-${index}`}>
            {data.map(({ title, elements }) => {
              return (
                <>
                  <ul className="p2">{title}</ul>
                  {elements.map((item) => {
                    return <li className="p2">{item}</li>;
                  })}
                </>
              );
            })}
          </div>
        </div>
      );
    });
  }

  render() {
    return (
      <>
        <div className="auditory-btns">
          <button
            id="auditory-btn-kids"
            onClick={() => {
              // console.log(event.target.id);
              this.setState({ isKidsModule: true });
              this.resetOpened(modulesKids);
              console.log(this.state.opened);
            }}
            className={this.state.isKidsModule ? "auditory-btn-active" : ""}
          >
            Для детей
          </button>
          <button
            id="auditory-btn-adults"
            onClick={() => {
              this.setState({ isKidsModule: false });
              this.resetOpened(modulesAdults);
              console.log(this.state.opened);
            }}
            className={this.state.isKidsModule ? "" : "auditory-btn-active"}
          >
            Для взрослых
          </button>
        </div>
        <p class="p1">
          Интерактивные курсы, направленные на введение в основы HTML, CSS и
          JavaScript. Занятия включают в себя игровые элементы, которые делают
          обучение увлекательным и эффективным.
        </p>
        <div className="modules">
          {this.state.isKidsModule
            ? this.renderModules(modulesKids)
            : this.renderModules(modulesAdults)}
        </div>
      </>
    );
  }
}

ReactDOM.render(<Portfolio />, document.getElementById("modules"));
