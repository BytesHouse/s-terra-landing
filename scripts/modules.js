let modulesKids = [
  {
    heading: "Модуль 1: Введение в веб-технологии и основы HTML",
    data: [
      {
        title: "Введение в веб-разработку",
        elements: [
          "Роль фронтенд-разработки в создании веб-приложений",
          "Обзор современных технологий",
        ],
      },
      {
        title: "Основы HTML",
        elements: [
          "Структура HTML-документа",
          "Работа с тегами и атрибутами",
          "Формы и их элементы",
        ],
      },
      {
        title: "Семантическая разметка",
        elements: [
          "Значение семантических тегов",
          "Создание доступных и поисковых оптимизированных страниц",
        ],
      },
    ],
  },
  {
    heading: "Модуль 2: Основы CSS и стилизация веб-страниц",
    data: [
      {
        title: "Введение в веб-разработку",
        elements: [
          "Роль фронтенд-разработки в создании веб-приложений",
          "Обзор современных технологий",
        ],
      },
      {
        title: "Основы HTML",
        elements: [
          "Структура HTML-документа",
          "Работа с тегами и атрибутами",
          "Формы и их элементы",
        ],
      },
      {
        title: "Семантическая разметка",
        elements: [
          "Значение семантических тегов",
          "Создание доступных и поисковых оптимизированных страниц",
        ],
      },
    ],
  },
  {
    heading: "Модуль 3: Основы JavaScript и взаимодействие с DOM",
    data: [
      {
        title: "Введение в веб-разработку",
        elements: [
          "Роль фронтенд-разработки в создании веб-приложений",
          "Обзор современных технологий",
        ],
      },
      {
        title: "Основы HTML",
        elements: [
          "Структура HTML-документа",
          "Работа с тегами и атрибутами",
          "Формы и их элементы",
        ],
      },
      {
        title: "Семантическая разметка",
        elements: [
          "Значение семантических тегов",
          "Создание доступных и поисковых оптимизированных страниц",
        ],
      },
    ],
  },
  {
    heading: "Модуль 4: Фреймворки и библиотеки",
    data: [
      {
        title: "Введение в веб-разработку",
        elements: [
          "Роль фронтенд-разработки в создании веб-приложений",
          "Обзор современных технологий",
        ],
      },
      {
        title: "Основы HTML",
        elements: [
          "Структура HTML-документа",
          "Работа с тегами и атрибутами",
          "Формы и их элементы",
        ],
      },
      {
        title: "Семантическая разметка",
        elements: [
          "Значение семантических тегов",
          "Создание доступных и поисковых оптимизированных страниц",
        ],
      },
    ],
  },
  {
    heading: "Модуль 5: Оптимизация производительности и отладка",
    data: [
      {
        title: "Введение в веб-разработку",
        elements: [
          "Роль фронтенд-разработки в создании веб-приложений",
          "Обзор современных технологий",
        ],
      },
      {
        title: "Основы HTML",
        elements: [
          "Структура HTML-документа",
          "Работа с тегами и атрибутами",
          "Формы и их элементы",
        ],
      },
      {
        title: "Семантическая разметка",
        elements: [
          "Значение семантических тегов",
          "Создание доступных и поисковых оптимизированных страниц",
        ],
      },
    ],
  },
  {
    heading: "Модуль 6: Введение в тестирование и сборка проектов",
    data: [
      {
        title: "Введение в веб-разработку",
        elements: [
          "Роль фронтенд-разработки в создании веб-приложений",
          "Обзор современных технологий",
        ],
      },
      {
        title: "Основы HTML",
        elements: [
          "Структура HTML-документа",
          "Работа с тегами и атрибутами",
          "Формы и их элементы",
        ],
      },
      {
        title: "Семантическая разметка",
        elements: [
          "Значение семантических тегов",
          "Создание доступных и поисковых оптимизированных страниц",
        ],
      },
    ],
  },
  {
    heading: "Модуль 7: Завершающий проект и практика",
    data: [
      {
        title: "Введение в веб-разработку",
        elements: [
          "Роль фронтенд-разработки в создании веб-приложений",
          "Обзор современных технологий",
        ],
      },
      {
        title: "Основы HTML",
        elements: [
          "Структура HTML-документа",
          "Работа с тегами и атрибутами",
          "Формы и их элементы",
        ],
      },
      {
        title: "Семантическая разметка",
        elements: [
          "Значение семантических тегов",
          "Создание доступных и поисковых оптимизированных страниц",
        ],
      },
    ],
  },
];

let modulesAdults = [
  {
    heading: "Модуль 1: Введение в веб-технологии и основы HTML",
    data: [
      {
        title: "Введение в веб-разработку",
        elements: [
          "Роль фронтенд-разработки в создании веб-приложений",
          "Обзор современных технологий",
        ],
      },
      {
        title: "Основы HTML",
        elements: [
          "Структура HTML-документа",
          "Работа с тегами и атрибутами",
          "Формы и их элементы",
        ],
      },
      {
        title: "Семантическая разметка",
        elements: [
          "Значение семантических тегов",
          "Создание доступных и поисковых оптимизированных страниц",
        ],
      },
    ],
  },
  {
    heading: "Модуль 2: Основы CSS и стилизация веб-страниц",
    data: [
      {
        title: "Введение в веб-разработку",
        elements: [
          "Роль фронтенд-разработки в создании веб-приложений",
          "Обзор современных технологий",
        ],
      },
      {
        title: "Основы HTML",
        elements: [
          "Структура HTML-документа",
          "Работа с тегами и атрибутами",
          "Формы и их элементы",
        ],
      },
      {
        title: "Семантическая разметка",
        elements: [
          "Значение семантических тегов",
          "Создание доступных и поисковых оптимизированных страниц",
        ],
      },
    ],
  },
  {
    heading: "Модуль 3: Основы JavaScript и взаимодействие с DOM",
    data: [
      {
        title: "Введение в веб-разработку",
        elements: [
          "Роль фронтенд-разработки в создании веб-приложений",
          "Обзор современных технологий",
        ],
      },
      {
        title: "Основы HTML",
        elements: [
          "Структура HTML-документа",
          "Работа с тегами и атрибутами",
          "Формы и их элементы",
        ],
      },
      {
        title: "Семантическая разметка",
        elements: [
          "Значение семантических тегов",
          "Создание доступных и поисковых оптимизированных страниц",
        ],
      },
    ],
  },
  {
    heading: "Модуль 4: Фреймворки и библиотеки",
    data: [
      {
        title: "Введение в веб-разработку",
        elements: [
          "Роль фронтенд-разработки в создании веб-приложений",
          "Обзор современных технологий",
        ],
      },
      {
        title: "Основы HTML",
        elements: [
          "Структура HTML-документа",
          "Работа с тегами и атрибутами",
          "Формы и их элементы",
        ],
      },
      {
        title: "Семантическая разметка",
        elements: [
          "Значение семантических тегов",
          "Создание доступных и поисковых оптимизированных страниц",
        ],
      },
    ],
  },
  {
    heading: "Модуль 5: Оптимизация производительности и отладка",
    data: [
      {
        title: "Введение в веб-разработку",
        elements: [
          "Роль фронтенд-разработки в создании веб-приложений",
          "Обзор современных технологий",
        ],
      },
      {
        title: "Основы HTML",
        elements: [
          "Структура HTML-документа",
          "Работа с тегами и атрибутами",
          "Формы и их элементы",
        ],
      },
      {
        title: "Семантическая разметка",
        elements: [
          "Значение семантических тегов",
          "Создание доступных и поисковых оптимизированных страниц",
        ],
      },
    ],
  },
  {
    heading: "Модуль 6: Введение в тестирование и сборка проектов",
    data: [
      {
        title: "Введение в веб-разработку",
        elements: [
          "Роль фронтенд-разработки в создании веб-приложений",
          "Обзор современных технологий",
        ],
      },
      {
        title: "Основы HTML",
        elements: [
          "Структура HTML-документа",
          "Работа с тегами и атрибутами",
          "Формы и их элементы",
        ],
      },
      {
        title: "Семантическая разметка",
        elements: [
          "Значение семантических тегов",
          "Создание доступных и поисковых оптимизированных страниц",
        ],
      },
    ],
  },
  {
    heading: "Модуль 7: Завершающий проект и практика",
    data: [
      {
        title: "Введение в веб-разработку",
        elements: [
          "Роль фронтенд-разработки в создании веб-приложений",
          "Обзор современных технологий",
        ],
      },
      {
        title: "Основы HTML",
        elements: [
          "Структура HTML-документа",
          "Работа с тегами и атрибутами",
          "Формы и их элементы",
        ],
      },
      {
        title: "Семантическая разметка",
        elements: [
          "Значение семантических тегов",
          "Создание доступных и поисковых оптимизированных страниц",
        ],
      },
    ],
  },
];

class Portfolio extends React.Component {
  constructor(props) {
    super(props);
    this.state = {
      isKidsModule: true,
      opened: null,
    };
  }

  // componentDidUpdate() {
  //   console.log(`открыт ${this.state.opened} модуль`);
  // }
  resetModules(index) {
    if (index != null) {
      let _module_data =
        document.getElementById("modules").children[2].children[index]
          .children[1];
      let _module_btn = _module_data.parentElement.children[0].children[1];
      // console.log(this.state.opened);
      // console.log(_module_btn);

      if (_module_data.classList.length > 0) {
        _module_data.classList.remove("module-active");
        _module_btn.classList.remove("module-btn-active");
      }
      _module_data.style.maxHeight = 0;
      _module_data.style.marginTop = 0;
      // _module.style.backgroundColor = "red";
    }
  }
  renderModules(arr) {
    // console.log(`перед рендером state = ${this.state.opened}`);
    // if (this.state.opened != null) {
    //   this.resetModules(this.state.opened);
    // }
    // this.resetModules(this.state.opened);
    // this.setState({ opened: null });
    return arr.map(({ heading, data }, index) => {
      return (
        <div className="module">
          <div className="module-heading">
            <p className="p1 semibold">{heading}</p>
            <button
              id={`module-${index}`}
              onClick={() => {
                let btn_id = event.target.id.replace("module-", "");
                // console.log(btn_id);
                let btn = document.getElementById(event.target.id);
                let modules =
                  btn.parentElement.parentElement.parentElement.children;
                let moduleActive = btn.parentElement.nextElementSibling;

                // console.log(modules);

                let op = this.state.opened;

                if (op != btn_id) {
                  if (op != null) {
                    modules[op].children[1].classList.remove("module-active");
                    modules[op].children[1].style.maxHeight = 0;
                    modules[op].children[0].children[1].classList.remove(
                      "module-btn-active"
                    );
                  }

                  this.state.opened = +btn_id;
                  // console.log(`state = ${this.state.opened}`);
                  moduleActive.classList.add("module-active");
                  moduleActive.style.maxHeight = `${moduleActive.scrollHeight}px`;
                  moduleActive.style.marginTop = "15px";
                } else {
                  this.state.opened = null;
                  // console.log(`state = ${this.state.opened}`);
                  moduleActive.classList.remove("module-active");
                  moduleActive.style.maxHeight = 0;
                  moduleActive.style.marginTop = 0;
                }

                btn.classList.toggle("module-btn-active");
              }}
            ></button>
          </div>
          <div className="module-data" id={`module-data-${index}`}>
            {data.map(({ title, elements }) => {
              return (
                <>
                  <ul className="p2">{title}</ul>
                  {elements.map((item) => {
                    return <li className="p2">{item}</li>;
                  })}
                </>
              );
            })}
          </div>
        </div>
      );
    });
  }

  render() {
    return (
      <>
        <div className="auditory-btns">
          <button
            id="auditory-btn-kids"
            onClick={() => {
              // console.log(event.target.id);
              this.resetModules(this.state.opened);
              this.state.opened = null;
              this.setState({ isKidsModule: true });
              // console.log(this.state.opened);
            }}
            className={this.state.isKidsModule ? "auditory-btn-active" : ""}
          >
            Для детей
          </button>
          <button
            id="auditory-btn-adults"
            onClick={() => {
              this.resetModules(this.state.opened);
              this.state.opened = null;
              this.setState({ isKidsModule: false });
              // console.log(this.state.opened);
            }}
            className={this.state.isKidsModule ? "" : "auditory-btn-active"}
          >
            Для взрослых
          </button>
        </div>
        <p class="p1">
          Интерактивные курсы, направленные на введение в основы HTML, CSS и
          JavaScript. Занятия включают в себя игровые элементы, которые делают
          обучение увлекательным и эффективным.
        </p>
        <div className="modules">
          {this.state.isKidsModule
            ? this.renderModules(modulesKids)
            : this.renderModules(modulesAdults)}
        </div>
      </>
    );
  }
}

ReactDOM.render(<Portfolio />, document.getElementById("modules"));
